
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tabler/icons-webfont@latest/tabler-icons.min.css">
    <title>Admin</title>

    <style>
        .container-md{
          display: flex;
          justify-content: center;
          align-items: center;
          height: 30%;
          text-align: center;
        }

        .Principal{
          font-family:Georgia, 'Times New Roman', Times, serif;
        }

        .input-group{
          display: flex;
          justify-content: center;
          align-items: center;
          height: 5vh;
        }

        .navbar, .container-fluid{
          background-color: rgb(123, 0, 255);
        }

    </style>
    
</head>
<body>

  <nav class="navbar navbar-expand-lg">
    <div class="container-fluid">
      <a style="color: azure; font-family: 'Times New Roman', Times, serif;" class="navbar-brand" href="#">Gestion De Inventario</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
        <div class="navbar-nav">
          <a class="nav-link" style="color: rgba(240, 255, 255, 0.556);" href="#">Ingresar Productos</a>
        </div>
      </div>
    </div>
  </nav>

  <div class="Principal">
    <h3 style="text-align: center; height: 10%; margin-top: 5vh;">BUSCAR VEHICULOS</h3>

    <div class="input-group">
      <select class="form-select" id="Lista" aria-label="Example select with button addon"></select>
      <button class="btn btn-outline-secondary" type="button" onclick="ListarAutos()">Ver</button>
    </div>
    
    <div id="Exit" class="container-md"></div>
  </div>
  
  <script>
    var marcas = [
      {nombre: "AUDI"},
      {nombre: "BMW"},
      {nombre: "FORD"},
      {nombre: "CHEVROLET"},
      {nombre: "VOLVO"},
      {nombre: "PEUGEOT"},
      {nombre: "RENAULT"}
    ];
  
    function LsMarcas() {
      var Ls = "";
      for (i = 0; i < marcas.length; i++) {
        Ls += "<option value='" + marcas[i].nombre + "'>" + marcas[i].nombre + "</option>";
      }
  
      document.getElementById("Lista").innerHTML = Ls;

    }
  
    LsMarcas();

    function ListarAutos(){

      var marcSelec = document.getElementById("Lista").value;
      console.log("Seleccionado:", marcSelec);

      var data = marcSelec;

    

      var Lista = "";
      
      for (i = 0; i < vehiculos.length; i++) {
        if(vehiculos[i].marca  === data){
          Lista += "<tr><td>" + vehiculos[i].modelo + "</td><td>" + vehiculos[i].tipo + "</td><td>" + vehiculos[i].marca + "</td><td><button type='button' class='btn btn-outline-danger'><i class='ti ti-trash-off'></i></button></td><td><button type='button' class='btn btn-outline-success'><i class='ti ti-edit'></i></button></td></tr>";
        }
      }
      
      Lista = "<table class='table table-striped'> <thead class='table-dark border'>  <tr>  <th>Modelo</th>  <th>Nombre</th>  <th>Marca</th>  <th>Eliminar</th>  <th>Editar</th> </tr>  </thead>" + Lista + "</table>";
      document.getElementById("Exit").innerHTML = Lista;
    }
    async function conseguirAutos() {

try {
   
    const response = await fetch('/getAutos');
    const autos = await response.json();
   console.log(autos);
   
   autos.forEach(auto => {



      const fila = document.createElement('tr');
      // Crea una columna para el botón de eliminar
      const eliminarColumna = document.createElement('td');

      // Crea un botón de eliminar
      const botonEliminar = document.createElement('button');
      botonEliminar.textContent = 'Eliminar';
      botonEliminar.addEventListener('click', () => {
        // Función para eliminar la fila al hacer clic en el botón
        tbody.removeChild(fila);
      });
      // Agrega el botón de eliminar a la columna de eliminación
      eliminarColumna.appendChild(botonEliminar);
      // Crea una columna para el botón de actualizar
      const actualizarColumna = document.createElement('td');

      // Crea un botón de actualizar
      const botonActualizar = document.createElement('button');
      botonActualizar.textContent = 'Actualizar';
      botonActualizar.addEventListener('click', () => {
        // Función para actualizar la fila al hacer clic en el botón
        document.getElementById('editar-marca').value = auto.marca;
        document.getElementById('editar-modelo').value = auto.modelo;
   
    document.getElementById('formulario-edicion').style.display = 'block';
      });
      document.getElementById('guardar-edicion').addEventListener('click', () => {
  // Obtener los valores editados del formulario
  const nuevaMarca = document.getElementById('editar-marca').value;
  const nuevoModelo = document.getElementById('editar-modelo').value;
  // Actualizar los datos en la fila (puedes ajustar esto según tus necesidades)
  auto.marca = nuevaMarca;
  auto.modelo = nuevoModelo;
  // Ocultar el formulario de edición
  document.getElementById('formulario-edicion').style.display = 'none';

  // Mostrar una alerta con los datos actualizados
});

    
      // Agrega el botón de actualizar a la columna de actualización
      actualizarColumna.appendChild(botonActualizar);
      const marcaColumna = document.createElement('td');
      marcaColumna.textContent = auto.marca; // Suponiendo que "marca" es una propiedad del objeto auto
      fila.appendChild(marcaColumna);

      const modeloColumna = document.createElement('td');
      modeloColumna.textContent = auto.modelo; // Suponiendo que "modelo" es una propiedad del objeto auto
      fila.appendChild(modeloColumna);
       // Agrega la columna de eliminación a la fila
       fila.appendChild(eliminarColumna);
       fila.appendChild(actualizarColumna);

      tbody.appendChild(fila);
    });


} catch (e) {
    console.log(e.message);
}
}
conseguirAutos();

  </script>

</body>
</html>